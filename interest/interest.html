<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>趣味语音</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
	  <div class="header">
		  <div class="nav">
	  	      <div class="menu">
					<ul>
						<li> <a href="../index/index.html">馆藏首页</a> </li>
						<li> 
							<a href="../history/history.html">历史演变</a>
							<ol>
								<li> <a href="#">当今特色</a></li>
								<li> <a href="#">历史起源</a></li>
								<li> <a href="#">发展历程</a></li>
							</ol>
						</li>
						<li>
							<a href="../classics/classics.html">经典传承</a>
							<ol>
								<li> <a href="#">文学作品</a></li>
								<li> <a href="#">经典川剧</a></li>
								<li> <a href="#">经典成都话影视作品</a></li>
								<li> <a href="#">成都话歌曲</a></li>
							</ol>
						</li>
						<li> <a href="../topic/topic.html">主题展览</a> 
							<ol>
								<li> <a href="#">方言名物</a></li>
								<li> <a href="#">民俗事象</a></li>
								<li> <a href="#">民俗活动</a></li>
							</ol>
						</li>
						<li> <a href="../interest/interest.html">趣味语音</a> 
							<ol>
								<li> <a href="#">熊猫diy方言命名</a></li>
								<li> <a href="#">方言读书</a></li>
								<li> <a href="#">方言唱歌</a></li>
							</ol>
						</li>
					</ul>
					<div class="regest">
					  <div class="login"> 
						  <a>登录</a> 
						  &nbsp; 
						  <a>注册</a> 
					  </div>
			    </div>
        	  </div>
		  </div>
	  </div>
	  <div class="container">
		  <div class="topic"><img src="https://s-file-2.ykt.cbern.com.cn/auxo_channel_api/%E5%8D%9A%E7%89%A9%E9%A6%86%E8%AF%AD%E8%A8%80%E5%9B%BD%E6%83%85banner_1679925173631.png?x-bce-process=image/format,f_auto" alt=""></div>
		  <div class="index-module_edu-column-panel_-eaRc" data-testid="topic-column" id="ca65ebc5-16fa-433d-8fbe-9b58af0aa65b">
			  <div class="index-module_header_aHvVI">
				  <h2 class="index-module_title_ZeEa4">熊猫diy</h2>
			  </div>
			  <div class="index-module_content-wrapper_yRwg6">
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
			  </div>
		  </div>
	  	  <div class="index-module_edu-column-panel_-eaRc" data-testid="topic-column" id="ca65ebc5-16fa-433d-8fbe-9b58af0aa65b">
			  <div class="index-module_header_aHvVI">
				  <h2 class="index-module_title_ZeEa4">方言读书</h2>
			  </div>
			  <div class="index-module_content-wrapper_yRwg6">
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
				  <br>
			  </div>
		  </div>
		  <div class="index-module_edu-column-panel_-eaRc" data-testid="topic-column" id="ca65ebc5-16fa-433d-8fbe-9b58af0aa65b">
			  <div class="index-module_header_aHvVI">
				  <h2 class="index-module_title_ZeEa4">方言唱歌</h2>
			  </div>
			  <div class="index-module_content-wrapper_yRwg6">
				  <div class="app">
  			 		  <button class="record-btn">开始录音</button>
  					  <audio controls class="audio-player"></audio>
 				  </div>
				  <button @click="btn" v-bind:class="{ but01: style1, but02: style2 }" id="playButton2"></button>
				  <audio id="music2" src="song.m4a"></audio>
				  <br>
				  <br>
				  <div class="text">
					  <p>天老爷欸！她跟我说魔法披风~</p>
					  <p>我付出啷个多，她说我脑壳有乒乓</p>
					  <p>我是个哈儿是个憨包儿是个宝批龙</p>
					  <p>明明晓得她在耍我我还攒劲往前冲</p>
				  </div>
			  </div>
		  </div>
	  </div>
	  <div class="footer">
			<div class="index-module_footer_+fjTi">
				<div>
					<div class="index-module_logo_2U3rm"><img src="https://szyb.smartedu.cn/img/logo1.2e48b7c5.png?x-bce-process=image/format,f_auto" class="index-module_logo1_W7wRg" alt="">
						<div class="index-module_split_ga43T"></div>
						<img src="../index/img/logo.png" width="800px" height="170px" alt="">
					</div>
				</div>
				<div class="index-module_right_wtkxP">
					<div class="index-module_copyright_h4TVU">
						<div class="index-module_text_NqHTU">
							<div><span>版权所有：</span><span>成都方言文化数字博物馆</span></div>
							<div><span>指导单位：</span><span>中华人民共和国教育部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;国家语言文字工作委员会</span></div>
							<div><span>网站运维：</span><span>教育部教育技术与资源发展中心（中央电化教育馆）</span></div>
						</div>
						<div class="index-module_beian_-RkKR"><a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" rel="noreferrer">京ICP备&nbsp;09059518号-20</a><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010202010141" target="_blank" rel="noreferrer"><img src="https://szyb.smartedu.cn/img/beian.0c577066.png?x-bce-process=image/format,f_auto" alt="">京公网安备 11010202010141号</a>
						</div>
					</div></div>
		  </div>
	  </div>
<!--	点击按钮播放音频-->
	  <script>
		  var playButton2 = document.getElementById("playButton2");
		  var music2 = document.getElementById("music2");
		  
		  playButton2.addEventListener("click",function(){
			  music2.play();
		  });
	</script>
<!--	按钮变换样式-->
	<script>
	export default {
		data() {
			return {
				style1: true,
				style2: false
			}
		},
		methods: {
			btn() {
				this.style1 = !this.style1
				this.style2 = !this.style2  
			}
		}
	}   
	</script>
<!--	实现录音并播放-->
	<script>
		const recordBtn = document.querySelector(".record-btn");
		const player = document.querySelector(".audio-player");

		if (navigator.mediaDevices.getUserMedia) {
		  var chunks = [];
		  const constraints = { audio: true };
		  navigator.mediaDevices.getUserMedia(constraints).then(
			stream => {
			  console.log("授权成功！");

			  const mediaRecorder = new MediaRecorder(stream);

			  recordBtn.onclick = () => {
				if (mediaRecorder.state === "recording") {
				  mediaRecorder.stop();
				  recordBtn.textContent = "开始录音";
				  console.log("录音结束");
				} else {
				  mediaRecorder.start();
				  console.log("录音中...");
				  recordBtn.textContent = "结束录音";
				}
				console.log("录音器状态：", mediaRecorder.state);
			  };

			  mediaRecorder.ondataavailable = e => {
				chunks.push(e.data);
			  };

			  mediaRecorder.onstop = e => {
				var blob = new Blob(chunks, { type: "audio/ogg; codecs=opus" });
				chunks = [];
				var audioURL = window.URL.createObjectURL(blob);
				player.src = audioURL;
			  };
			},
			() => {
			  console.error("授权失败！");
			}
		  );
		} else {
		  console.error("浏览器不支持 getUserMedia");
		}
	</script>
</body>
</html>
